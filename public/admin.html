<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Ciclismo Pro</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1 class="logo">üö¥ Ciclismo Pro - Admin</h1>
            <nav>
                <a href="index.html" class="nav-link">Loja</a>
                <a href="admin.html" class="nav-link active">Admin</a>
            </nav>
        </div>
    </header>

        <!-- Lock Overlay (Passcode) -->
        <div id="lock-overlay" class="lock-overlay" aria-modal="true" role="dialog">
            <div class="lock-card">
                <h2 class="section-title" style="margin-bottom: 1rem;">√Årea Restrita</h2>
                <p style="color: var(--text-gray); margin-bottom: 1rem;">Insira o passcode para acessar o painel administrativo.</p>
                <div class="form-group" style="margin-bottom: 1rem;">
                    <label for="admin-passcode">Passcode</label>
                    <input type="password" id="admin-passcode" placeholder="Digite o passcode" autocomplete="current-password" />
                </div>
                <button class="btn btn-primary" id="unlock-btn">Desbloquear</button>
                <p id="lock-error" class="lock-error" aria-live="polite"></p>
                <small class="lock-hint">Dica: personalize o passcode em <code>scripts/admin.js</code>.</small>
            </div>
        </div>

    <!-- Admin Content -->
    <div class="admin-container">
        <div class="container">
            <!-- Toolbar vis√≠vel ap√≥s desbloqueio -->
            <div id="back-toolbar" class="back-toolbar" style="display:none;">
                <a href="index.html" class="btn btn-secondary">‚Üê Home</a>
            </div>
            
            <!-- Adicionar Produto -->
            <section class="admin-section">
                <h2 class="section-title">Adicionar Produto</h2>
                <div class="admin-form">
                    <div class="form-group">
                        <label for="product-name">Nome do Produto</label>
                        <input type="text" id="product-name" placeholder="Ex: Capacete Aerodin√¢mico Pro">
                    </div>
                    
                    <div class="form-group">
                        <label for="product-description">Descri√ß√£o</label>
                        <textarea id="product-description" rows="4" placeholder="Descreva o produto..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-image">URL da Imagem</label>
                        <input type="text" id="product-image" placeholder="https://exemplo.com/imagem.jpg">
                        <small>Opcional: informe uma URL de imagem OU selecione um arquivo abaixo.</small>
                    </div>

                    <div class="form-group">
                        <label for="product-image-file">Arquivo de Imagem</label>
                        <input type="file" id="product-image-file" accept="image/*">
                        <small>Se um arquivo for selecionado, ele ter√° prioridade sobre a URL.</small>
                        <div class="image-preview-wrap">
                            <img id="product-image-preview" class="image-preview" alt="Pr√©-visualiza√ß√£o" />
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-link">Link da Shopee (Afiliado)</label>
                        <input type="text" id="product-link" placeholder="https://shopee.com.br/...">
                    </div>
                    
                    <button class="btn btn-primary" onclick="addProduct()">Salvar Produto</button>
                </div>
            </section>

            <!-- Adicionar Kit -->
            <section class="admin-section">
                <h2 class="section-title">Adicionar Kit</h2>
                <div class="admin-form">
                    <div class="form-group">
                        <label for="kit-name">Nome do Kit</label>
                        <input type="text" id="kit-name" placeholder="Ex: Kit Completo Pro Rider">
                    </div>
                    
                    <div class="form-group">
                        <label for="kit-description">Descri√ß√£o</label>
                        <textarea id="kit-description" rows="4" placeholder="Descreva o kit..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="kit-image">URL da Imagem</label>
                        <input type="text" id="kit-image" placeholder="https://exemplo.com/kit.jpg">
                    </div>
                    
                    <div class="form-group">
                        <label for="kit-products">IDs dos Produtos (separados por v√≠rgula)</label>
                        <input type="text" id="kit-products" placeholder="Ex: 1701234567890, 1701234567891, 1701234567892">
                        <small>Cole os IDs dos produtos que fazem parte deste kit</small>
                    </div>
                    
                    <button class="btn btn-primary" onclick="addKit()">Salvar Kit</button>
                </div>
            </section>

            <!-- Exportar Dados -->
            <section class="admin-section">
                <h2 class="section-title">Exportar Dados</h2>
                <p class="export-info">Use estes bot√µes para exportar os dados do LocalStorage e atualizar os arquivos JSON na pasta /data</p>
                
                <div class="export-buttons">
                    <button class="btn btn-export" onclick="exportProducts()">Exportar Produtos (JSON)</button>
                    <button class="btn btn-export" onclick="exportKits()">Exportar Kits (JSON)</button>
                </div>

                <!-- √Årea de Exporta√ß√£o -->
                <div id="export-area" class="export-area" style="display: none;">
                    <h3 id="export-title"></h3>
                    <textarea id="export-output" rows="15" readonly></textarea>
                    <button class="btn btn-secondary" onclick="copyToClipboard()">Copiar para √Årea de Transfer√™ncia</button>
                    <button class="btn btn-secondary" onclick="downloadJSON()">Download JSON</button>
                </div>
            </section>

            <!-- Lista de Produtos Salvos -->
            <section class="admin-section">
                <h2 class="section-title">Produtos Oficiais (data/products.json)</h2>
                <p class="export-info">Visualiza√ß√£o em somente leitura. Para editar/excluir, use "Editar (local)", que cria/atualiza uma c√≥pia no seu navegador (LocalStorage).</p>
                <div id="official-products" class="saved-list">
                    <!-- Lista ser√° carregada via JavaScript -->
                </div>
            </section>

            <!-- Lista de Produtos Salvos (LocalStorage) -->
            <section class="admin-section">
                <h2 class="section-title">Produtos Salvos (LocalStorage)</h2>
                <div id="saved-products" class="saved-list">
                    <!-- Lista ser√° carregada via JavaScript -->
                </div>
            </section>

            <!-- Lista de Kits Salvos -->
            <section class="admin-section">
                <h2 class="section-title">Kits Salvos (LocalStorage)</h2>
                <div id="saved-kits" class="saved-list">
                    <!-- Lista ser√° carregada via JavaScript -->
                </div>
            </section>

        </div>
    </div>

    <!-- Modal Editar Produto -->
    <div id="edit-modal" class="modal-overlay" style="display:none;" aria-modal="true" role="dialog">
        <div class="modal-card">
            <h2 class="section-title" style="margin-bottom: 1rem;">Editar Produto</h2>
            <div class="admin-form">
                <div class="form-group">
                    <label for="edit-product-name">Nome do Produto</label>
                    <input type="text" id="edit-product-name">
                </div>
                <div class="form-group">
                    <label for="edit-product-description">Descri√ß√£o</label>
                    <textarea id="edit-product-description" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label for="edit-product-image">URL da Imagem</label>
                    <input type="text" id="edit-product-image">
                    <small>Opcional: informe uma URL OU selecione um arquivo abaixo.</small>
                </div>
                <div class="form-group">
                    <label for="edit-product-image-file">Arquivo de Imagem</label>
                    <input type="file" id="edit-product-image-file" accept="image/*">
                    <small>Se um arquivo for selecionado, ele ter√° prioridade sobre a URL.</small>
                    <div class="image-preview-wrap">
                        <img id="edit-product-image-preview" class="image-preview" alt="Pr√©-visualiza√ß√£o" />
                    </div>
                </div>
                <div class="form-group">
                    <label for="edit-product-link">Link da Shopee (Afiliado)</label>
                    <input type="text" id="edit-product-link">
                </div>
                <div>
                    <button class="btn btn-primary" onclick="saveEditedProduct()">Salvar Altera√ß√µes</button>
                    <button class="btn btn-secondary" onclick="closeEditModal()">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Ciclismo Pro - Painel Administrativo</p>
        </div>
    </footer>

    <!-- Script -->
    <script src="scripts/admin.js"></script>
</body>
</html>
